<!doctype html>
<html><head>
  <meta charset="utf-8">
  <title>Random utilities by natevw</title>
</head><body>
  <h1>Utilities written by natevw, for natevw.</h1>
  You may use them too.
  
  <div id=meta>
    <h2>ipcalf originals</h2>
    <ul>
      <li><a href="//ipcalf.com">Public IP address</a> — it's <a href="https://github.com/natevw/ipcalf/tree/master#readme">an API</a> too, based on HTTP "Accept" header or ?format parameter
      <li><a href="//net.ipcalf.com">Private IP address</a> — uses WebRTC to get your local (network) IP address, often useful during web development.
    </ul>
  </div>
  
  <div id=pick_random>
    <h2>Random chooser</h2>
    <form>
      <input placeholder="space separated options"> <button>Decide</button><br>
      <b class=result></b>
    </form>
    <script>
      document.querySelector('#pick_random form').addEventListener('submit', function (evt) {
        evt.preventDefault();
        
        var s = this.querySelector('input').value,
            a = s.split(' '),
            i = Math.floor(Math.random() * a.length);
        this.querySelector('.result').textContent = a[i];
      }, false);
    </script>
  </div>
  
  <div id=grid_square>
    <h2>Grid square autolocator</h2>
    …is on my <a href="http://www.qsl.net/af7tb/">ham homepage</a>.
  </div>
  
  <div id=ostypes>
    <h2>OSType/FourCC magic number converter</h2>
    <form>
      <input class=hex placeholder="hex"> <input class=ascii placeholder="CODE">
      <b class=result></b>
    </form>
    <script>
      document.querySelector('#ostypes .hex').addEventListener('input', function (evt) {
        var raw = parseInt(this.value, 16),
            codes = [];
        for (var i = 0; i < 4; ++i) {
          codes.unshift((raw >>> 8*i) & 0xFF);
        }
        document.querySelector('#ostypes .ascii').value = String.fromCharCode.apply(null, codes);
      }, false);
      document.querySelector('#ostypes .ascii').addEventListener('input', function (evt) {
        var raw = 0;
        this.value.split('').reverse().forEach(function (c,i) {
          raw |= (c.charCodeAt(0) << 8*i);
        });
        document.querySelector('#ostypes .hex').value = "0x" + raw.toString(16);
      }, false);
    </script>
  </div>
  
  <div id=dbm>
    <h2>dBm ↔︎ watts converter</h2>
    <form>
      <input class=dbm placeholder="dBm"> <input class=watts placeholder="watts">
    </form>
    <script>
      var dbmEl = document.querySelector('#dbm .dbm'),
          wattsEl = document.querySelector('#dbm .watts');
      dbmEl.addEventListener('input', function () {
        wattsEl.value = Math.pow(10, +this.value / 10) / 1000;
      }, false);
      wattsEl.addEventListener('input', function () {
        dbmEl.value = Math.log10(+this.value * 1000) * 10;
      }, false);
    </script>
  </div>
  
</body></html>